% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/phinterval.R
\name{phint_unnest}
\alias{phint_unnest}
\title{Unnest a phinterval into a data frame}
\usage{
phint_unnest(phint, hole_to = c("drop", "na"), keep_size = FALSE)
}
\arguments{
\item{phint}{\verb{[phinterval / Interval]}

A \verb{<phinterval>} or \verb{<Interval>} vector to unnest.}

\item{hole_to}{\verb{[character(1)]}

How to handle hole elements (phintervals with zero spans). If \code{"drop"}
(the default), holes are excluded from the output. If \code{"na"}, a row with
\code{NA} start and end times is included for each hole.}

\item{keep_size}{\verb{[TRUE / FALSE]}

Should a \code{size} column be included in the output? If \code{TRUE}, the output
includes a \code{size} column containing the number of spans in the original
phinterval element. If \code{FALSE} (the default), only \code{key}, \code{start}, and
\code{end} columns are returned.}
}
\value{
A data frame with columns:
\itemize{
\item \code{key}: Numeric identifying the index of the phinterval element
\item \code{start}: POSIXct start time of the span
\item \code{end}: POSIXct end time of the span
\item \code{size}: (if \code{keep_size = TRUE}) Integer count of spans in the phinterval element
}
}
\description{
\code{phint_unnest()} converts a \verb{<phinterval>} vector into a data frame where
each time span becomes a row.
}
\details{
\code{phint_unnest()} expands each phinterval element into its constituent time
spans, creating one row per span. The resulting data frame contains a \code{key}
column identifying which phinterval element each span came from, along with
\code{start} and \code{end} columns for the span boundaries.

For phinterval elements containing multiple disjoint spans, all spans are
included with the same \code{key} value. Scalar phinterval elements (single spans)
produce a single row.
}
\examples{
# Unnest scalar phintervals
phint <- phinterval(
  start = as.Date(c("2000-01-01", "2000-02-01")),
  end = as.Date(c("2000-01-15", "2000-02-15"))
)
phint_unnest(phint)

# Unnest multi-span phinterval
phint <- phinterval(
  start = as.Date(c("2000-01-01", "2000-03-01")),
  end = as.Date(c("2000-01-15", "2000-03-15")),
  by = 1
)
phint_unnest(phint)

# Handle holes
phint <- c(
  phinterval(as.Date("2000-01-01"), as.Date("2000-01-15")),
  hole(),
  phinterval(as.Date("2000-02-01"), as.Date("2000-02-15"))
)
phint_unnest(phint, hole_to = "drop")
phint_unnest(phint, hole_to = "na")

# Include size column
phint_unnest(phint, keep_size = TRUE, hole_to = "na")

}
